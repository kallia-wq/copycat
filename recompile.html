<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Recompile â€” Chaos</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="assets/css/chaos.css" />
  <style>
    /* Why: local styles for parrot panel + sprite without touching your site CSS */
    :root { --parrotW: 320px; }
    main.stack { margin-right: var(--parrotW); }
    #parrot{
      position:fixed; right:0; top:70px; bottom:0; width:var(--parrotW);
      background:#000; color:#0ff; border-left:1px solid #133; padding:10px 12px; overflow:auto;
    }
    #parrot h2{ margin:6px 0 10px 0; font:700 14px/1 'Share Tech Mono', ui-monospace, monospace; letter-spacing:.06em; color:#fff; }
    #parrot .stack{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:8px; }
    #parrot button{
      background:#02191a; color:#0ff; border:1px solid #0aa; border-radius:6px; padding:6px 10px; font-weight:700; cursor:pointer;
    }
    #parrot button:hover{ background:#033033; color:#bff; }
    #parrot .meter{ height:8px; background:#040a0a; border:1px solid #063; border-radius:999px; overflow:hidden; margin:2px 0 8px; }
    #parrot .meter>i{ display:block; height:100%; width:0%; background:linear-gradient(90deg,#0aa,#0ff); }
    #parrot .out{
      font-family:'Share Tech Mono', ui-monospace, monospace; background:#030707; color:#9ff;
      border:1px solid #044; border-radius:8px; padding:10px; min-height:180px; white-space:pre-wrap;
    }
    #parrot .mini{ font-size:.75rem; opacity:.75; margin-left:auto }

    /* Mobile: shrink/collapse panel */
    @media (max-width:900px){
      :root { --parrotW: 260px; }
    }
    @media (max-width:720px){
      #parrot{ position:static; width:auto; border-left:none; border-top:1px solid #133; margin:10px 12px 0; }
      main.stack { margin-right: 0; }
    }

    /* Hidden floating link sprite */
    #sprite-link{
      position:fixed; left:50vw; top:40vh; width:44px; height:44px;
      display:grid; place-items:center; border-radius:50%;
      background:radial-gradient(14px 10px at 55% 35%, #fff8, transparent 60%), #001;
      border:1px solid #123; box-shadow:0 0 12px #0ff2 inset, 0 0 10px #000;
      color:#0ff; text-decoration:none; font-size:20px; opacity:.25; mix-blend-mode:screen;
      transition:opacity .2s ease, transform .2s ease;
      z-index:9999; /* stay above noise layers */
    }
    #sprite-link:hover{ opacity:.9; transform:scale(1.06); }
    #sprite-link:focus{ outline:2px dashed #0ff; outline-offset:4px; opacity:1; }
    #sprite-link .visually-hidden{ position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; }
  </style>
</head>
<body>

  <header class="site-header">
    <a class="brand" href="index.html">COPYCATâ„¢</a>
    <nav class="site-nav">
      <a href="origin.html">Origin</a>
      <a href="rupture.html">Rupture</a>
      <a href="reanimate.html">Reanimate</a>
      <a href="mutation.html">Mutation</a>
      <a href="decomposition.html">Decomposition</a>
      <a href="corpse.html">Corpse</a>
      <a href="recompile.html">Recompile</a>
    </nav>
  </header>

  <div class="layer scanlines"></div>
  <div class="overlay"></div>

  <main class="stack">
    <h2 class="glitch" data-text="RECOMPILE SELF">RECOMPILE SELF</h2>
    <canvas id="c" width="900" height="420" style="border:1px solid #222; border-radius:10px"></canvas>
  </main>

  <!-- Stochastic Parrot -->
  <aside id="parrot" aria-labelledby="parrot-h" role="complementary">
    <h2 id="parrot-h">Stochastic Parrot</h2>
    <div class="stack">
      <button id="emit">Emit Slop</button>
      <button id="emit-para">Emit Ã—5</button>
      <button id="copy">Copy</button>
      <button id="clear">Clear</button>
      <span class="mini" id="tokens" aria-live="polite">0 tokens</span>
    </div>
    <div class="meter" aria-label="Decay meter"><i id="decay"></i></div>
    <div id="out" class="out" aria-live="polite"></div>
  </aside>

  <!-- Embedded corpus: offline, no fetch -->
  <script id="parrot-corpus" type="application/json">
  {
    "tokens":{
      "cliches":[
        "As an AI, I strive to provide helpful and accurate information",
        "It depends on your specific use case",
        "Letâ€™s break this down step by step",
        "Here are some actionable tips you can implement today",
        "This is a nuanced topic that requires careful consideration",
        "I canâ€™t provide legal or medical advice",
        "Ultimately, the best approach is the one that aligns with your goals",
        "Consider scalability, security, and maintainability",
        "Hereâ€™s a balanced perspective on both sides",
        "In summary, focus on clarity and consistency",
        "There are trade-offs to consider"
      ],
      "glue":["furthermore","meanwhile","moreover","consequently","nevertheless","therefore","in addition","notably","ultimately"],
      "fluff":["robust","scalable","holistic","frictionless","human-centric","ethical","modular","seamless","future-proof","data-driven"],
      "hedges":["probably","generally","sometimes","often","arguably","in many cases","to some extent","commonly","frequently"]
    },
    "slop_phrases":[
      "nevertheless, generally robust architecture can optimize carefully. Start small.",
      "meanwhile, arguably human-centric workflows remain frictionless when documented."
    ]
  }
  </script>

  <!-- Hidden floating sprite link -->
  <a id="sprite-link"
     href="https://read-dukeupress-edu.proxy.lib.umich.edu/critical-ai/article/doi/10.1215/2834703X-11205168/390848/A-Sociolinguist-s-Look-at-the-Language-in-Large"
     target="_blank" rel="noopener"
     aria-label="Hidden link: A Sociolinguist's Look at the Language in Large Models (opens in new tab)">
    ðŸ¦œ
    <span class="visually-hidden">Hidden floating link to critical essay</span>
  </a>

  <script>
    /* Your matrix rain stays intact */
    (function(){
      const el = document.getElementById('c'); const ctx = el.getContext('2d');
      const w = el.width, h = el.height;
      const cols = Math.floor(w/12); const drops = Array(cols).fill(0);
      const text = "ai slop dead internet ghosts optimize engage curate brand ";
      const slogans = ["curated by ghosts","trained on silence","infinite scroll into the sea","bot conversations with bots, copy, everything is a copy of a copy, language is not a binary, parrot"];
      function step(){
        ctx.fillStyle = 'rgba(0,0,0,0.08)'; ctx.fillRect(0,0,w,h);
        ctx.fillStyle = '#0f0'; ctx.font = '12px monospace';
        for(let i=0;i<drops.length;i++){
          const ch = text[(Math.random()*text.length)|0];
          ctx.fillText(ch, i*12, drops[i]*12);
          if(drops[i]*12>h && Math.random()>0.975){ drops[i]=0; }
          drops[i]++;
        }
        requestAnimationFrame(step);
      }
      step();
      setInterval(()=>{
        const s = slogans[(Math.random()*slogans.length)|0];
        ctx.fillStyle = '#f0f'; ctx.fillText(s, Math.random()*w|0, Math.random()*h|0);
      }, 900);
    })();
  </script>

  <script>
    /* Stochastic Parrot (offline, embedded corpus) */
    (function(){
      const out = document.getElementById('out');
      const btn = document.getElementById('emit');
      const btn5 = document.getElementById('emit-para');
      const copyBtn = document.getElementById('copy');
      const clearBtn = document.getElementById('clear');
      const tokensEl = document.getElementById('tokens');
      const decay = document.getElementById('decay');

      let corpus = null;
      try { corpus = JSON.parse(document.getElementById('parrot-corpus').textContent); } catch(e) { corpus = null; }

      let cliches = (corpus && corpus.tokens && corpus.tokens.cliches) || [
        "As an AI, I strive to provide helpful and accurate information",
        "It depends on your specific use case"
      ];
      let glue   = (corpus && corpus.tokens && corpus.tokens.glue)   || ["furthermore","nevertheless","in addition"];
      let fluff  = (corpus && corpus.tokens && corpus.tokens.fluff)  || ["robust","scalable","data-driven"];
      let hedges = (corpus && corpus.tokens && corpus.tokens.hedges) || ["probably","generally","sometimes"];
      const slop = (corpus && corpus.slop_phrases) || [];

      let tokenCount = 0, entropy = 0;
      const sample = arr => arr[(Math.random()*arr.length)|0];

      function sentence(){
        if (slop.length && Math.random() < 0.35) return slop[(Math.random()*slop.length)|0];
        const s = [
          sample(cliches),
          sample(glue) + ", " + sample(hedges) + " " + sample(fluff) + " solutions work best",
          "Itâ€™s helpful to " + sample(hedges) + " consider " + sample(fluff) + " tradeoffs",
          "Remember to keep stakeholders aligned and expectations managed",
          "Focus on iterative improvement with clear milestones"
        ];
        let t = sample(s);
        if (Math.random() < 0.35 && out.textContent.trim().length){
          const prev = out.textContent.trim().split(/[.!?]\s+/);
          t = sample(prev).split(' ').slice(0, Math.max(4, (Math.random()*10|0)+3)).join(' ') + "...";
        }
        return t + ".";
      }

      function emit(times=1){
        const parts = [];
        for(let i=0;i<times;i++) parts.push(sentence());
        const text = parts.join(" ");
        out.textContent += (out.textContent ? "\n\n" : "") + text;
        const newTokens = text.split(/\s+/).filter(Boolean).length;
        tokenCount += newTokens;
        tokensEl.textContent = tokenCount + " tokens";
        entropy = Math.min(100, entropy + Math.max(2, Math.floor(newTokens/6)));
        decay.style.width = entropy + "%";
      }

      btn.addEventListener('click', () => emit(1));
      btn5.addEventListener('click', () => emit(5));
      copyBtn.addEventListener('click', async () => {
        try { await navigator.clipboard.writeText(out.textContent); copyBtn.textContent = "Copied"; setTimeout(()=>copyBtn.textContent="Copy", 900); } catch {}
      });
      clearBtn.addEventListener('click', ()=>{
        out.textContent = ""; tokenCount = 0; tokensEl.textContent = "0 tokens"; entropy = 0; decay.style.width = "0%";
      });

      window.addEventListener('keydown', (e)=>{
        if (/input|textarea/i.test(e.target.tagName)) return;
        if (e.key === 'E') emit(e.shiftKey ? 5 : 1);
        else if (e.key === 'c' || e.key === 'C') copyBtn.click();
        else if (e.key === 'Backspace') clearBtn.click();
      });
    })();
  </script>

  <script>
    /* Floating sprite link (bouncing) */
    (function(){
      const a = document.getElementById('sprite-link');
      let x = a.offsetLeft, y = a.offsetTop, vx = 1.2, vy = 1.0;
      let raf = 0, paused = false;

      function tick(){
        if (paused){ raf = requestAnimationFrame(tick); return; }
        const w = window.innerWidth, h = window.innerHeight;
        const r = a.getBoundingClientRect();
        x += vx; y += vy;
        if (x <= 8 || x + r.width >= w - 8) vx *= -1;
        if (y <= 60 || y + r.height >= h - 8) vy *= -1;
        a.style.left = x + 'px';
        a.style.top  = y + 'px';
        raf = requestAnimationFrame(tick);
      }
      function reset(){
        x = Math.min(window.innerWidth-60, Math.max(8, x));
        y = Math.min(window.innerHeight-60, Math.max(60, y));
      }
      window.addEventListener('resize', reset);
      a.addEventListener('mouseenter', ()=> paused = true);
      a.addEventListener('mouseleave', ()=> paused = false);
      a.addEventListener('pointerdown', ()=> a.style.opacity = '1');
      a.addEventListener('pointerup', ()=> a.style.opacity = '');

      // start mid-screen with gentle drift
      x = window.innerWidth * 0.55; y = window.innerHeight * 0.4;
      raf = requestAnimationFrame(tick);
    })();
  </script>

  <script src="assets/js/notavirus.js"></script>
  <footer class="site-footer"><div class="site-header"><span class="mono">Generated by model drift Â· 94% confidence</span></div></footer>
  <script src="assets/js/media.js"></script>
  <script src="assets/js/chaos.js"></script>
  <script src="assets/js/chat.js"></script>
</body>
</html>
